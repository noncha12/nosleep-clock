<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8">
    <title>‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ô‡∏≠‡∏ô‡∏°‡∏≤‡∏ô‡∏≤‡∏ô‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  </head>
  
<body id="captureArea">
  <h1>üïí ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ô‡∏≠‡∏ô‡∏°‡∏≤‡∏ô‡∏≤‡∏ô‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?</h1>

  <div class="card">
    <h2>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏∑‡πà‡∏ô ‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏∑‡πà‡∏ô</h2>
    <input type="date" id="wakeDate">
    <input type="time" id="wakeTime">
  </div>

  <div class="card">
    <div class="time-row">
      <div>
        <h2>‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h2>
        <div id="currentDateTime">--:-- --/--/----</div>
      </div> <br>
      <div class="digital-clock" id="digitalClock">--:--:--</div>
    </div>
  </div>

  <div id="result">‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏≠‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ ...........(‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á/‡∏ô‡∏≤‡∏ó‡∏µ)</div>
  <button class="share-camera" onclick="captureFullPage()">
    <span class="emoji-shake">üì∏</span> ‡πÅ‡∏ä‡∏£‡πå‡∏†‡∏≤‡∏û‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
  </button>
  

  <script>
    function updateCurrentDateTime() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');
      const day = String(now.getDate()).padStart(2, '0');
      const month = String(now.getMonth() + 1).padStart(2, '0');
      const year = now.getFullYear();

      document.getElementById('currentDateTime').textContent = `${hours}:${minutes} - ${day}/${month}/${year}`;
      document.getElementById('digitalClock').textContent = `${hours}:${minutes}:${seconds}`;
      calculateTimeDifference();
    }

    function calculateTimeDifference() {
      const wakeDate = document.getElementById('wakeDate').value;
      const wakeTime = document.getElementById('wakeTime').value;
      const result = document.getElementById('result');

      if (!wakeDate || !wakeTime) {
        result.textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏∑‡πà‡∏ô";
        return;
      }

      const wakeDateTime = new Date(`${wakeDate}T${wakeTime}`);
      const now = new Date();

      let diffMs = now - wakeDateTime;
      const diffMinutes = Math.abs(Math.floor(diffMs / 1000 / 60));
      const days = Math.floor(diffMinutes / (60 * 24));
      const hours = Math.floor((diffMinutes % (60 * 24)) / 60);
      const minutes = diffMinutes % 60;

      if (diffMs >= 0) {
        result.innerHTML = `‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÑ‡∏î‡πâ‡∏ô‡∏≠‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏•‡∏≤\n` +
          `<span style="color: white; text-decoration: underline; font-size: 30px;">${days}</span> ‡∏ß‡∏±‡∏ô ` +
          `<span style="font-size: 20px;">${hours}</span> ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ` +
          `<span style="font-size: 20px;">${minutes}</span> ‡∏ô‡∏≤‡∏ó‡∏µ`;
      } else {
        result.innerHTML = `‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ï‡∏∑‡πà‡∏ô‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å\n` +
          `<span style="color: orange; text-decoration: underline; font-size: 30px;">${days}</span> ‡∏ß‡∏±‡∏ô` +
          `<span style="font-size: 20px;">${hours}</span> ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ` +
          `<span style="font-size: 20px;">${minutes}</span> ‡∏ô‡∏≤‡∏ó‡∏µ`;
      }
    }

    function captureFullPage() {
      html2canvas(document.getElementById("captureArea")).then(canvas => {
        const link = document.createElement("a");
        link.download = "nosleep-fullscreen.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
      });
    }

    function setDefaultDateTime() {
      const now = new Date();
      document.getElementById('wakeDate').value = now.toISOString().split("T")[0];
      document.getElementById('wakeTime').value = now.toTimeString().slice(0, 5);
    }

    window.onload = function () {
      setDefaultDateTime();
      updateCurrentDateTime();
      setInterval(updateCurrentDateTime, 1000);
    };
  </script>
</body>
</html>
